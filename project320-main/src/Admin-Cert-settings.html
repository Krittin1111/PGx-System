<!doctype html>
<html lang="th">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PGX System ‚Äî Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/Admin-Cert-settings.css" />
    <script src="js/shared-translations.js"></script>
</head>

<body>
    <!-- Modal: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà -->
    <div class="modal" id="certModal" aria-hidden="true">
        <div class="modal-backdrop"></div>
        <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="certDialogTitle" tabindex="-1">
            <div class="dialog-head">
                <div id="certDialogTitle" data-translate="add-new-certificate">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</div>
                <button class="icon-close" type="button" id="closeCertModal" data-translate-aria="close" aria-label="‡∏õ‡∏¥‡∏î">‚úï</button>
            </div>

            <div class="dialog-body">
                <div class="form-grid">
                    <!-- ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô -->
                    <label class="field">
                        <span data-translate="standard">‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Standard)</span>
                        <input class="input" id="std" type="text" data-translate-placeholder="enter-standard" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô">
                    </label>

                    <!-- ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á -->
                    <label class="field">
                        <span data-translate="certificate-number">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á (Certificate No.)</span>
                        <input class="input" id="certNo" type="text" data-translate-placeholder="enter-certificate-number" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á">
                    </label>

                    <!-- ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á -->
                    <label class="field">
                        <span data-translate="certification-authority">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á (Authority)</span>
                        <input class="input" id="authority" type="text" data-translate-placeholder="enter-authority" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á">
                    </label>

                    <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å -->
                    <label class="field">
                        <span data-translate="issue-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å (Issue Date)</span>
                        <div class="input-date">
                            <input class="input" id="issueDate" type="date" placeholder="‡∏ß‡∏ß/‡∏î‡∏î/‡∏õ‡∏õ">
                            <span class="cal-icn">üìÖ</span>
                        </div>
                    </label>

                    <!-- ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ -->
                    <label class="field">
                        <span data-translate="expiry-date">‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (Expiry Date)</span>
                        <div class="input-date">
                            <input class="input" id="expiryDate" type="date" placeholder="‡∏ß‡∏ß/‡∏î‡∏î/‡∏õ‡∏õ">
                            <span class="cal-icn">üìÖ</span>
                        </div>
                    </label>

                    <!-- ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô -->
                    <div class="field field-col-2">
                        <span data-translate="upload-authority-logo">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</span>
                        <div class="upload-row">
                            <input id="logoFile" type="file" accept="image/*" hidden>
                            <button class="btn-upload-sm" type="button" id="btnPickLogo" data-translate="upload">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î <span
                                    aria-hidden="true">üñºÔ∏è</span></button>
                        </div>
                        <div class="hint" data-translate="current-logo">‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô : <span id="logoName">‡πÑ‡∏°‡πà‡∏°‡∏µ</span></div>
                        <div class="hint-muted" data-translate="logo-size-hint">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î A √ó B</div>
                    </div>
                </div>
            </div>

            <div class="dialog-actions">
                <button class="btn-cancel" type="button" id="cancelCert" data-translate="cancel-btn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn-primary" type="button" id="saveCert" data-translate="save-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ .app ‡∏Ñ‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡∏™‡∏≠‡∏á‡∏•‡∏π‡∏Å: aside.sidebar ‡πÅ‡∏•‡∏∞ main.main -->
    <div class="app">
        <aside class="sidebar">
            <div class="brand">
                <div class="logo"></div>
                <div class="brand-text">PGx System</div>
            </div>

            <nav class="menu">
                <a class="menu-item" href="Admin.html" data-translate="user-list">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</a>
                <a class="menu-item" href="Admin-Using the system.html" data-translate="system-usage">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</a>
                <a class="menu-item active" href="Admin-General-settings.html" data-translate="general-settings">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</a>
                <!-- <a class="menu-item active" href="Admin-Cert-settings.html" data-translate="certificate-settings">‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</a> -->
                <a class="menu-item" href="#" data-translate="logout" id="logoutBtn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </nav>

            <div class="access">Access : text</div>
        </aside>

        <main class="main">
            <header class="topbar">
                <h1 class="title" data-translate="admin-title">‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h1>
                <div class="top-controls">
                    <!-- Language Toggle Switch -->
                    <div class="language-toggle">
                        <div class="lang-switch" id="languageSwitch">
                            <div class="lang-option left" data-lang="en">EN</div>
                            <div class="lang-option right active" data-lang="th">TH</div>
                            <div class="switch-slider"></div>
                        </div>
                    </div>
                    
                    <!-- Shutdown Button -->
                    <div class="shutdown-button">
                        <button type="button" id="shutdownBtn" class="shutdown-btn" onclick="window.close()" title="Close Application">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18.36 6.64a9 9 0 1 1-12.73 0" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <line x1="12" y1="2" x2="12" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </header>

            <section class="frame">
                <div class="card">
                    <div class="card-head">
                        <div class="card-title">
                            <button class="back-btn" onclick="window.location.href='Admin-General-settings.html'" data-translate-title="back-to-general-settings">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19 12H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span data-translate="back-button">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</span>
                            </button>
                            <span data-translate="certificate-settings">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á</span>
                        </div>
                    </div>

                    <div class="filters">
                        <label class="f">
                            <span data-translate="certificate-standard">‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á</span>
                            <input class="input" type="text" data-translate-placeholder="search-placeholder" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..." />
                        </label>
                        <button class="btn-outline" id="openCreate" data-translate="add-new-certificate">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</button>
                    </div>

                    <div class="table-wrap">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th data-translate="certificate">‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á</th>
                                    <th data-translate="certificate-number">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á</th>
                                    <th data-translate="certification-authority">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á</th>
                                    <th data-translate="issue-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å</th>
                                    <th data-translate="expiry-date">‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏</th>
                                    <th data-translate="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    <th class="center" data-translate="actions">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ISO 15189:2022</td>
                                    <td>LAB-ISO15189-TH-2025-0021</td>
                                    <td>TISI (‡∏™‡∏°‡∏≠.)</td>
                                    <td>2025-01-10</td>
                                    <td>2028-01-09</td>
                                    <td><span class="status ok" data-translate="status-normal">‡∏õ‡∏Å‡∏ï‡∏¥</span></td>
                                    <td class="center">
                                        <button class="icon-btn btnEditCert" data-std="ISO 15189:2022"
                                            data-certno="LAB-ISO15189-TH-2025-0021" data-auth="TISI (‡∏™‡∏°‡∏≠.)"
                                            data-issue="2025-01-10" data-exp="2028-01-09"
                                            data-logo="PGXlogo31.png">‚öôÔ∏è</button>

                                    </td>
                                </tr>
                            </tbody>

                        </table>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <!-- Modal: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà -->

    <script>
        const openBtn = document.getElementById('openCreate');
        const modal = document.getElementById('certModal');
        const closeBtn = document.getElementById('closeCertModal');
        const cancelBtn = document.getElementById('cancelCert');
        const saveBtn = document.getElementById('saveCert');

        const pickLogo = document.getElementById('btnPickLogo');
        const logoInput = document.getElementById('logoFile');
        const logoName = document.getElementById('logoName');

        const std = document.getElementById('std');
        const certNo = document.getElementById('certNo');
        const authority = document.getElementById('authority');
        const issueDate = document.getElementById('issueDate');
        const expiryDate = document.getElementById('expiryDate');

        const open = () => { modal.classList.add('show'); document.body.style.overflow = 'hidden'; }
        const close = () => { modal.classList.remove('show'); document.body.style.overflow = ''; }

        closeBtn.addEventListener('click', close);
        cancelBtn.addEventListener('click', close);
        modal.querySelector('.modal-backdrop').addEventListener('click', close);
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') close(); });

        pickLogo.addEventListener('click', () => logoInput.click());
        logoInput.addEventListener('change', () => {
            logoName.textContent = logoInput.files?.[0]?.name || '‡πÑ‡∏°‡πà‡∏°‡∏µ';
        });

        // ‚úÖ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà"
        openBtn?.addEventListener('click', () => {

            document.getElementById('certDialogTitle').textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà';

            // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡πà‡∏≤
            std.value = '';
            certNo.value = '';
            authority.value = '';
            issueDate.value = '';
            expiryDate.value = '';
            logoInput.value = '';
            logoName.textContent = '‡πÑ‡∏°‡πà‡∏°‡∏µ';

            open();

            // ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ö‡∏ö Clean
            saveBtn.onclick = () => {
                console.log("CREATE CERT:", {
                    standard: std.value.trim(),
                    certNo: certNo.value.trim(),
                    authority: authority.value.trim(),
                    issueDate: issueDate.value,
                    expiryDate: expiryDate.value,
                    logo: logoInput.files?.[0] || null
                });
                close();
            };
        });

        // ‚úÖ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ü‡∏±‡∏ô‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"
        document.querySelectorAll('.btnEditCert').forEach(btn => {
            btn.addEventListener('click', () => {

                document.getElementById('certDialogTitle').textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á';

                std.value = btn.dataset.std;
                certNo.value = btn.dataset.certno;
                authority.value = btn.dataset.auth;
                issueDate.value = btn.dataset.issue;
                expiryDate.value = btn.dataset.exp;
                logoName.textContent = btn.dataset.logo || '‡πÑ‡∏°‡πà‡∏°‡∏µ';

                open();

                saveBtn.onclick = () => {
                    console.log("UPDATE CERT:", {
                        standard: std.value.trim(),
                        certNo: certNo.value.trim(),
                        authority: authority.value.trim(),
                        issueDate: issueDate.value,
                        expiryDate: expiryDate.value,
                        logo: logoInput.files?.[0] || btn.dataset.logo || null
                    });
                    close();
                };
            });
        });
    </script>

    <script src="js/admin-cert-settings.js"></script>

</body>

</html>